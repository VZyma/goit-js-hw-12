{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/helpers/funcs.js","../src/main.js"],"sourcesContent":["const API_KEY = '43830047-c5fe5a5c9108224ed65675c7e';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchPhotos = async (query, photosCurrentPage = 1) => {\n  const response = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: PER_PAGE,\n      page: photosCurrentPage,\n    },\n  });\n\n  return response.data;\n};","export const createMarkup = images => {\n  return images.reduce(\n    ( html, { tags, webformatURL, largeImageURL, likes, views, comments, downloads } ) => {\n      return (\n        html +\n        `\n\t\t\t<li class=\"gallery__item item-gallery\">\n\t\t\t\t<a class=\"item-gallery__link\" href=\"${largeImageURL}\">\n\t\t\t\t\t<img class=\"item-gallery__img\" src=\"${webformatURL}\" alt=\"${tags}\">\n\t\t\t\t</a>\n\t\t\t\t<ul class=\"item-gallery__data\">\n\t\t\t\t\t<li class=\"item-gallery__data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery__subtitle\">Likes</h2>\n\t\t\t\t\t\t<p class=\"item-gallery__counter\">${likes}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item-gallery__data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery__subtitle\">Views</h2>\n\t\t\t\t\t\t<p class=\"item-gallery__counter\">${views}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item-gallery__data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery__subtitle\">Comments</h2>\n\t\t\t\t\t\t<p class=\"item-gallery__counter\">${comments}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item-gallery__data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery__subtitle\">Downloads</h2>\n\t\t\t\t\t\t<p class=\"item-gallery__counter\">${downloads}</p>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t`\n      );\n    },\n    ''\n  );\n};","export const hideLoader = loaderEl => {\n  loaderEl.classList.add('is-hidden');\n};\n\nexport const showLoader = loaderEl => {\n  loaderEl.classList.remove('is-hidden');\n};\n\nexport const showLoadMoreBtn = loadMoreBtnEl => {\n  loadMoreBtnEl.classList.remove('is-hidden');\n}\n\nexport const hideLoadMoreBtn = loadMoreBtnEl => {\n  loadMoreBtnEl.classList.add('is-hidden');\n}\n\nexport const disableSearchFormSubmitBtn = searchFormSubmitBtnEl => {\n  searchFormSubmitBtnEl.classList.add('is-disabled');\n}\n\nexport const enableSearchFormSubmitBtn = searchFormSubmitBtnEl => {\n  searchFormSubmitBtnEl.classList.remove('is-disabled');\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchPhotos, PER_PAGE } from './js/pixabay-api.js';\nimport { createMarkup } from './js/render-functions.js';\n\nimport {\n  hideLoader,\n  showLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  disableSearchFormSubmitBtn,\n  enableSearchFormSubmitBtn,\n} from './js/helpers/funcs.js';\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst searchFormEl = document.querySelector('.js-search-form');\nconst searchFormSubmitBtnEl = document.querySelector('.js-search-form-submit-btn');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\n// Search params\nlet query = '';\nlet photosCurrentPage = 1;\nlet totalPages = 0;\n\nconst lightbox = new SimpleLightbox('.item-gallery__link', {\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n\n////////////////////////////////\n// -1- Search form submit function\n////////////////////////////////\nconst onSearch = async event => {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  photosCurrentPage = 1;\n\n  // Hide laod more btn\n  hideLoadMoreBtn(loadMoreBtnEl);\n\n  // Get query string\n  const form = event.currentTarget;\n  query = form.elements.searchword.value.trim();\n\n  // Check is empty query\n  if (query === '') {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n\n  try {\n    // Disable search form submit button\n    disableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n\n    // Show loader\n    showLoader(loaderEl);\n\n    // Get photos data\n    const { hits, totalHits } = await fetchPhotos(query, photosCurrentPage);\n\n    // Check is empty query\n    if (totalHits === 0) {\n      // Enable search form submit button\n      enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      form.reset();\n      hideLoader(loaderEl);\n      return;\n    }\n\n    // Render photos\n    galleryEl.insertAdjacentHTML('beforeend', createMarkup(hits));\n\n    lightbox.refresh();\n\n    // Hide loader\n    hideLoader(loaderEl);\n\n    // Enable search form submit button\n    enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (totalPages > 1) {\n      // Show laod more btn\n      showLoadMoreBtn(loadMoreBtnEl);\n    }\n  } catch (error) {\n    // Enable search form submit button\n    enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n\n    // Hide loader\n    hideLoader(loaderEl);\n\n    iziToast.error({\n      message: 'Search params is not valid!',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n\n  // Reset search form\n  form.reset();\n};\n\n// Load search form submit\nsearchFormEl.addEventListener('submit', onSearch);\n\nconst smoothScrollOnLoadMore = () => {\n  const lastPhoto = document.querySelector('.gallery__item');\n  const photosHeight = lastPhoto.getBoundingClientRect().height;\n  // console.log(\" photosHeight:\", photosHeight)\n  const twoPhotosHeight = photosHeight * 2;\n  // console.log(\"twoPhotosHeight:\", twoPhotosHeight)\n  window.scrollBy({\n    top: twoPhotosHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n  // window.scrollBy(0, 1000);\n  // window.scrollBy(0, window.innerHeight);\n};\n\n////////////////////////////////\n// -2- Load more btn press function\n////////////////////////////////\nconst onLoadMorePress = async event => {\n  try {\n    // Hide laod more btn\n    hideLoadMoreBtn(loadMoreBtnEl);\n\n    // Show loader\n    showLoader(loaderEl);\n\n    photosCurrentPage += 1;\n\n    // Get photos data\n    const { hits, totalHits } = await fetchPhotos(query, photosCurrentPage);\n\n    // Render photos\n    galleryEl.insertAdjacentHTML('beforeend', createMarkup(hits));\n\n    lightbox.refresh();\n\n    smoothScrollOnLoadMore();\n\n    // Hide loader\n    hideLoader(loaderEl);\n\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (photosCurrentPage < totalPages) {\n      // Show laod more btn\n      showLoadMoreBtn(loadMoreBtnEl);\n    } else {\n      loadMoreBtnEl.removeEventListener('click', onLoadMorePress);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n  } catch (error) {\n    // Enable search form submit button\n    enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n\n    // Hide loader\n    hideLoader(loaderEl);\n\n    iziToast.error({\n      message: 'Search params is not valid!',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n};\n\n// Load more btn click\nloadMoreBtnEl.addEventListener('click', onLoadMorePress);"],"names":["API_KEY","BASE_URL","PER_PAGE","axios","fetchPhotos","query","photosCurrentPage","createMarkup","images","html","tags","webformatURL","largeImageURL","likes","views","comments","downloads","hideLoader","loaderEl","showLoader","showLoadMoreBtn","loadMoreBtnEl","hideLoadMoreBtn","disableSearchFormSubmitBtn","searchFormSubmitBtnEl","enableSearchFormSubmitBtn","galleryEl","searchFormEl","totalPages","lightbox","SimpleLightbox","onSearch","event","form","iziToast","hits","totalHits","smoothScrollOnLoadMore","twoPhotosHeight","onLoadMorePress"],"mappings":"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"}